<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>الصفحة الرئيسية | النظام</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Firebase الإصدار الكلاسيكي -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase.js"></script>

  <script src="lang.js"></script>
  <script src="main.js" defer></script>
</head>
<body>
  <div class="container">
    <img src="logo.png" alt="شعار الشركة" class="logo" />

    <button id="btnCashier" class="main-btn" data-key="cashier">الكاشير</button>
    <button id="btnAccounting" class="main-btn" data-key="accounting">المحاسبة والمخازن</button>

    <button id="btnLangToggle" class="lang-btn">English</button>

    <p id="updateStatus" class="status"></p>
  </div>

  <script>
    // ===== Firebase Config =====
    const firebaseConfig = {
      apiKey: "AIzaSyBdDFbWuByBWsDqEmC18nSlIKG6QZ5s0wA",
      authDomain: "fawatirr-75242.firebaseapp.com",
      databaseURL: "https://fawatirr-75242-default-rtdb.firebaseio.com",
      projectId: "fawatirr-75242",
      storageBucket: "fawatirr-75242.firebasestorage.app",
      messagingSenderId: "1059799456100",
      appId: "1:1059799456100:web:d624eb6f98aaee78950271",
      measurementId: "G-7SQXEJQY6Y"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // ===== اللغة =====
    let currentLang = "ar";
    function updateLanguage() {
      document.documentElement.lang = currentLang;
      document.documentElement.dir = currentLang === "ar" ? "rtl" : "ltr";
      const elements = document.querySelectorAll("[data-key]");
      elements.forEach(el => {
        el.textContent = translations[currentLang][el.dataset.key];
      });
      document.getElementById("btnLangToggle").textContent = currentLang === "ar" ? "English" : "العربية";
    }

    document.getElementById("btnLangToggle").addEventListener("click", () => {
      currentLang = currentLang === "ar" ? "en" : "ar";
      updateLanguage();
    });

    document.getElementById("btnCashier").addEventListener("click", () => {
      window.location.href = "cashier.html";
    });
    document.getElementById("btnAccounting").addEventListener("click", () => {
  window.location.href = "login.html";
});

    // ===== مراقبة الاتصال عبر Firebase =====
    const statusRef = db.ref("/system/status");
    statusRef.on("value", snapshot => {
      const status = snapshot.val();
      document.getElementById("updateStatus").textContent =
        status ? "✅ النظام متصل ومحدث" : "⚠️ لا يوجد اتصال مباشر الآن";
    });

    updateLanguage();
  </script>
</body>
</html>